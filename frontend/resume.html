<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Viewer</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-6">
    <h1 class="text-3xl font-bold mb-6 text-center text-blue-700">Submitted Resumes</h1>

    <div id="resume-list" class="grid grid-cols-1 sm:grid-cols-2 gap-6 h-[70vh] overflow-y-auto p-2"></div>

    <div class="flex justify-center mt-6"> 
    <button onclick="loadResumes()" class="bg-gray-700 hover:bg-gray-900 text-white font-bold px-4 py-2 rounded flex items-center gap-2 cursor-pointer transition duration-300">
        <span id="refresh-icon" class="inline-block">‚è≥</span>
        Refresh
    </button>
    </div>


    <script>
        async function loadResumes() {
            const refreshIcon = document.getElementById('refresh-icon');

            refreshIcon.classList.remove("animate-spin");
            void refreshIcon.offsetWidth;
            refreshIcon.classList.add("animate-spin");

            try{
              const res = await fetch('http://127.0.0.1:5000/resume');
              const data = await res.json();

              const container = document.getElementById("resume-list");
              container.innerHTML = "";

              if (data.length === 0) {
                  container.innerHTML = `
                     <p class="text-gray-500">No resumes submitted yet.</p>
                  `;
                  return;
              }
              
              data.forEach((resume, index) => {
                  const card = document.createElement("div");
                  card.className = "bg-white p-5 rounded-lg shadow-md border border-gray-200 hover:shadow-lg transition";

                  card.innerHTML = `
                  <h3 class="text-xl font-semibold mb-2">#${index + 1}: ${resume.name}</h3>
                  <p><strong>Email:</strong> ${resume.email}</p>
                  <p><strong>Skills:</strong> ${resume.skills.join(', ')}</p>
                  <p><strong>Education:</strong> ${resume.education}</p>
                  <p><strong>Experience:</strong> ${resume.experience}</p>
                  <p><strong>Projects:</strong> ${resume.projects}</p>
                  <p><strong>Certifications:</strong> ${resume.certifications}</p>
  
              `;

             container.appendChild(card);
              });
            
            } catch (error) {
                console.error("Error fetching resumes:", error);
            } finally {
                refreshIcon.classList.remove("animate-spin");
            }
            
          }

          loadResumes();

      </script>

    
</body>
</html>